#------------------------------------------------------------------#
#                                                                  #
# (C) Copyright IBM Corp.  2008, 2008                              #
# IBM CPL License                                                  #
#                                                                  #
#------------------------------------------------------------------#


.NOTPARALLEL: 

#SILENT=@
SILENT=

srchdirs := ./ ../ ../../ ../../../ ../../../../ ../../../../../ ../../../../../../ ../../../../../../../ ../../../../../../../../ ../../../../../../../../../ ../../../../../../../../../../ ../../../../../../../../../../../
FindUpperFile = $(realpath $(firstword $(wildcard $(addsuffix $(1),$(srchdirs)))))

RUNTEST := $(call FindUpperFile,RunTest.pl)
$(if $(RUNTEST),,$(error ERROR: did not find RunTest.pl))


export BGQ_BUILD_DIR      # export for use by runjob.sh
export BGQ_INSTALL_DIR

RUNOPS := --ranks-per-node 1 --np 1
export RUNOPS

TIMELIMIT = 300           # default run time limit

C_SRC 	= $(wildcard *.c)
CXX_SRC	= $(wildcard *.cc)
TEST_OBJS := $(notdir $(patsubst %.c,%.o,$(C_SRC)) $(patsubst %.cc,%.o,$(CXX_SRC)))

LIBS += 

TESTNAME = $(notdir $(shell pwd))

TARGET = $(TESTNAME).elf

CURDIRNAME := $(shell $(BASENAME) `pwd`)


